{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//HTML ELEMENTS IN CONSTANTS\n\nconst buttonEl = document.querySelector('.button');\nconst inputEl = document. querySelector('.input');\nconst listEl = document.querySelector('.list');\nconst listFavEl = document.querySelector('.list_fav');\n\nconst localFavEl = JSON.parse(localStorage.getItem ('favorite')) ||[]; //Creo la constante para recoger la lista de favoritos y le digo que si tiene guardado en el local storage el item 'favorite' me coja ese y si no tiene nada, que sea un array vacio.\nconsole.log(localFavEl);\n\nfor (const serie of localFavEl){\n  const liFav = document.createElement('li');\n  const titleFav = document.createElement('h4');\n  const contentTitleFav = document.createTextNode(serie.name);\n  const imgFav = document.createElement('img');\n  imgFav.setAttribute ('src', serie.image);\n\n  listFavEl.appendChild(liFav);\n  liFav.appendChild(titleFav);\n  liFav.appendChild(imgFav);\n  titleFav.appendChild(contentTitleFav);\n}\n\n// CALL TO THE API\n\nfunction showpPrintTheData(){\n  let userinput = inputEl.value;\n  fetch(`http://api.tvmaze.com/search/shows?q=${userinput}`)\n    .then(function(response){\n      return response.json();\n    })\n    .then(function(data){ //todo lo que haga lo tengo que hacer dentro de la funcion en el ambito de data, porque todo el tiempo estoy trabajando con la respuesta que me devuelve data que es un array de objetos. Si lo pongo debajo y uso sus datos, me va a decir que no existe.\n\n      // PRINT THE TITLES AND IMAGES     \n\n      listEl.innerHTML = ''; \n      \n      //con la lista vacia le digo que con cada busqueda la lista ul se me quede vacia antes de cada nueva busqueda.\n      // listFavEl.innerHTML = ''; \n      //No hace falta, porque quiero que se me almacenen constantemente en favoritos, no quiero vaciar el array.\n\n      for (let i = 0; i < data.length; i++){\n        console.log(data);\n        const showImage = data[i].show.image;\n        const showName = data[i].show.name;\n        const showId = data[i].show.id;\n\n        const newLi = document.createElement('li');\n        newLi.setAttribute ('class', 'item_list');\n        newLi.setAttribute ('id', showId);\n        // const contentId = document.createTextNode (showId);\n\n        const newTitle = document.createElement('h3');\n        const contentnewTitle = document.createTextNode(showName);\n\n        const newImg = document.createElement('img');\n        // const contentnewImg = document.createTextNode (showImageMedium);\n        \n        if (showImage === null){\n          newImg.setAttribute('src', 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV');\n        } else {newImg.setAttribute('src', showImage.medium);}\n       \n        listEl.appendChild(newLi);\n        newLi.appendChild(newTitle);\n        newLi.appendChild(newImg);\n\n        newTitle.appendChild(contentnewTitle);\n      }\n\n      //Sigo dentro de data pero no dentro del bucle\n\n      const resultList = document.querySelectorAll('.item_list'); //me devuele un array de objetos donde cada objeto es el li, uno por cada resultado\n      console.log (resultList);\n\n      for (let index = 0; index < resultList.length; index++){\n        resultList[index].addEventListener ('click', handlerFavorite);\n      }\n\n      // ADD FAVOURITE\n      function handlerFavorite (event) {\n        const clicked = event.currentTarget;\n        console.log (clicked); //console.log me da solo el elemento pero...console.dir me da el mismo elemento pero como objeto y esto si que lo puedo utilizar, para buscar los datos que necesito y acceder a ellos a traves de las claves del objeto.\n        console.dir (clicked);\n        clicked.classList.toggle('favorite'); //1 paso completado, nos pone la clase favorito si click\n\n        const showImageFav = clicked.lastChild.src;\n        console.log(showImageFav);\n\n        const showNameFav = clicked.outerText;\n        console.log(showNameFav);\n\n        const showIdFav = clicked.id;\n\n        if (clicked.classList.contains('favorite')){\n          const itemFav = document.createElement ('li');\n          itemFav.setAttribute ('class', 'item_list');\n          const imgFav = document.createElement ('img');\n          imgFav.setAttribute('src', showImageFav);\n          if (showImageFav === null){\n            imgFav.setAttribute('src', 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV');\n          }\n          const titleFav = document.createElement ('h4');\n          const contentNewTitleFav = document.createTextNode (showNameFav);\n        \n          listFavEl.appendChild(itemFav);\n          itemFav.appendChild(imgFav);\n          itemFav.appendChild(titleFav);\n          titleFav.appendChild(contentNewTitleFav);\n        }\n        \n        // SAVE IN LOCAL STORAGE\n        //Creo un objeto con los datos que he sacado\n\n        const localObject = {\n          'name': showNameFav,\n          'image': showImageFav,\n          'id': showIdFav,\n        };\n        \n        console.log(localObject);\n\n        localFavEl.push(localObject); //Al array vacio le aÃ±ado cada serie como objeto\n\n        localStorage.setItem ('favorite', JSON.stringify(localFavEl));// Guardo el array de objetos con el nombre 'favorite' con stringify para convertirlo en  cadena, ya que en el local storage no se pude guardar un array, asi que con strinfigy lo guardo en cadena.\n\n      }\n    });\n}\n\nbuttonEl.addEventListener('click', showpPrintTheData);\n\nfunction getdata(){\n\n}\n\ngetdata();\n\n"]}